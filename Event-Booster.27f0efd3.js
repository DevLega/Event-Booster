var e;const t={posters:document.getElementById("posters"),pagination:document.getElementById("pagination"),searchInput:document.getElementById("search-input"),dropdown:document.getElementById("countryDropdown"),countryList:document.getElementById("countryList"),selectedCountry:document.getElementById("selectedCountry"),dropdownArrow:document.getElementById("dropdownArrow"),modal:document.getElementById("modal-window"),closeBtn:document.getElementById("modal-window_close-icon"),modalTopPhoto:document.getElementById("modal-window_top-photo"),modalMainPhoto:document.getElementById("modal-winow_main-photo"),infoDescr:document.getElementById("info-descr"),whenDescrDate:document.getElementById("when-descr_date"),whenDescrTime:document.getElementById("when-descr_time"),whereDescrCity:document.getElementById("where-descr_city"),whereDescrPlace:document.getElementById("where-descr_place"),whoDescrAuthor:document.getElementById("who-descr_author"),descrStandartPrice:document.getElementById("descr_standart-price"),descrVipPrice:document.getElementById("descr_vip-price"),buyStandartBtn:document.getElementById("buyStandartBtn"),buyVipBtn:document.getElementById("buyVipBtn")},n=t.modal;function a(){n.classList.remove("is-open"),setTimeout(()=>{n.classList.add("hidden"),document.body.style.overflow="auto"},500)}t.closeBtn.addEventListener("click",a),n.addEventListener("click",e=>{e.target===n&&a()});const i=document.getElementById("info-descr"),r=document.getElementById("toggle-info");r.addEventListener("click",()=>{i.classList.contains("line-clamp-3")?(i.classList.remove("line-clamp-3"),r.textContent="View Less"):(i.classList.add("line-clamp-3"),r.textContent="View More")});const d=new class{constructor(){this._apiKey="RO7qWdCAE673OL1GG2So7c2DTSgA49pc",this._baseUrl="https://app.ticketmaster.com/discovery/v2/events.json",this._countryCode="",this._search="",this._size=20,this._page=1,this._totalPages=1}get apiKey(){return this._apiKey}get baseUrl(){return this._baseUrl}get countryCode(){return this._countryCode}get search(){return this._search}get size(){return this._size}get page(){return this._page}get totalPages(){return this._totalPages}set countryCode(e){this._countryCode=e}set search(e){this._search=e}set size(e){this._size=e}set page(e){this._page=e}async fetchEvent(e){try{let n=await fetch(e);if(!n.ok)throw Error(`HTTP error ${n.status}`);let a=await n.json();if(!a?._embedded){t.posters.innerHTML="<p class='text-center text-2xl mb-12'>Нема подій.</p>",c();return}return this._totalPages=a.page.totalPages||1,a}catch(e){console.error("fetchEvent error:",e)}}getData(){return this.fetchEvent(`${this._baseUrl}?size=${this._size}&page=${this._page}&apikey=${this._apiKey}`)}getDataByCountry(e){return this.fetchEvent(`${this._baseUrl}?countryCode=${e}&size=${this._size}&page=${this._page}&apikey=${this._apiKey}`)}getDataByEventName(e){return this.fetchEvent(`${this._baseUrl}?keyword=${e}&size=${this._size}&page=${this._page}&apikey=${this._apiKey}`)}getDataByAuthor(e){return this.fetchEvent(`${this._baseUrl}?attractionName=${e}&size=${this._size}&page=${this._page}&apikey=${this._apiKey}`)}renderData(e){if(!e)return;let a=e._embedded.events.map(e=>`
      <div class="poster-item relative h-auto w-full md:w-[196px] text-center justify-items-center cursor-pointer hover:scale-103 transition-transform duration-100 ease-in-out" data-id="${e.id}">
        <div class="relative inline-block">
          <img class="mt-[13px] mb-[5px] rounded-tl-[50px] rounded-br-[50px] object-cover md:h-[227px]" src="${e.images[5].url}" alt="">
          <div class="absolute z-10 border border-[#DC56C54D] w-[153px] h-[143px] rounded-tl-[50px] rounded-br-[50px] top-0 -right-[12px]"></div>
        </div>
        <h2 class="text-pink-500 font-bold text-[14px] md:text-base">${e.name}</h2>
        <p class="text-white font-normal text-[14px] md:text-base">${e.dates.start.localDate}</p>
        <div class="flex items-center gap-[3px]">
          <img class="w-[7px] h-[10px]" src="public/icon-marker.svg" alt="">
          <p class="text-white font-semibold text-[12px] md:text-[14px]">${e._embedded.venues[0].name}</p>
        </div>
      </div>
    `).join("");t.posters.innerHTML=a,t.posters.querySelectorAll(".poster-item").forEach(a=>{a.addEventListener("click",()=>{let i=a.getAttribute("data-id");var r=e._embedded.events.find(e=>e.id===i);n.classList.add("is-open"),n.classList.remove("hidden"),document.body.style.overflow="hidden";let d=(e,t)=>e?.find(e=>e.width===t)?.url||e?.[0]?.url||"public/default-image.png";t.modalTopPhoto.src=d(r.images,256)||d(r.images,100),t.modalMainPhoto.src=d(r.images,640)||d(r.images,342),t.infoDescr.textContent=r.info||r.name||"No info available",t.whenDescrDate.textContent=r.dates?.start?.localDate??"Unknown",t.whenDescrTime.textContent=r.dates?.start?.localTime??"Unknown";let o=r._embedded?.venues?.[0];t.whereDescrCity.textContent=o?.city?.name??"Unknown",t.whereDescrPlace.textContent=o?.name??"Unknown";let s=r._embedded?.attractions?.[0];t.whoDescrAuthor.textContent=s?.name??"Unknown";let c=r.priceRanges;c?.length>0&&(t.descrStandartPrice.textContent=`${c[0].type}: ${c[0].min} - ${c[0].max} ${c[0].currency}`,t.buyStandartBtn.onclick=()=>window.open(r.url,"_blank"),c.length>1&&(t.descrVipPrice.textContent=`${c[1].type}: ${c[1].min} - ${c[1].max} ${c[1].currency}`,t.buyVipBtn.onclick=()=>window.open(r.url,"_blank"),t.vipPriceContainer.style.display="block"))})})}};function o(e,t=!1){let n=document.createElement("div");return n.className="px-3 py-1 cursor-pointer",t&&n.classList.add("active-page"),n.innerHTML=`<p class="text-[14px] font-normal">${e}</p>`,n.addEventListener("click",()=>{d.page!==e&&(d.page=e,l())}),n}function s(){let e=document.createElement("div");return e.className="px-3 py-1",e.innerHTML='<p class="text-[14px] font-normal">...</p>',e}function c(){let e=Math.max(1,d.totalPages),n=Math.min(Math.max(1,d.page),e),a=t.pagination;a.innerHTML="";let i=document.createDocumentFragment();if(e<=7){for(let t=1;t<=e;t++)i.appendChild(o(t,t===n));return a.appendChild(i)}let r=Math.max(2,n-Math.floor(2.5)),c=Math.min(e-1,r+5-1);c-r+1<5&&(r=Math.max(2,c-5+1)),i.appendChild(o(1,1===n)),r>2&&i.appendChild(s());for(let e=r;e<=c;e++)i.appendChild(o(e,e===n));c<e-1&&i.appendChild(s()),i.appendChild(o(e,n===e)),a.appendChild(i)}async function l(){let e=window.innerWidth;d.size=e>768&&e<1280?21:20;try{let e,n=t.searchInput.value.trim();e=d.countryCode?await d.getDataByCountry(d.countryCode):n?await d.getDataByEventName(n):await d.getData(),d.renderData(e),c()}catch(e){console.error("loadData error:",e)}}l(),t.searchInput.addEventListener("input",function(e,t=200){let n;return(...a)=>{clearTimeout(n),n=setTimeout(()=>e.apply(this,a),t)}}(()=>{d.page=1,l()}),1e3);((e=JSON.parse('[{"text":"","id":""},{"text":"Andorra","id":"AD"},{"text":"Australia","id":"AU"},{"text":"Austria","id":"AT"},{"text":"Belarus","id":"BY"},{"text":"Belgium","id":"BE"},{"text":"Brazil","id":"BR"},{"text":"Canada","id":"CA"},{"text":"Czech Republic","id":"CZ"},{"text":"Denmark","id":"DK"},{"text":"Estonia","id":"EE"},{"text":"Finland","id":"FI"},{"text":"France","id":"FR"},{"text":"Germany","id":"DE"},{"text":"Ireland","id":"IE"},{"text":"Israel","id":"IL"},{"text":"Italy","id":"IT"},{"text":"Latvia","id":"LV"},{"text":"Liechtenstein","id":"LI"},{"text":"Luxembourg","id":"LU"},{"text":"Macedonia","id":"MK"},{"text":"Mexico","id":"MX"},{"text":"Netherlands","id":"NL"},{"text":"New Zealand","id":"NZ"},{"text":"Norway","id":"NO"},{"text":"Poland","id":"PL"},{"text":"Portugal","id":"PT"},{"text":"Spain","id":"ES"},{"text":"Sweden","id":"SE"},{"text":"Switzerland","id":"CH"},{"text":"Ukraine","id":"UA"},{"text":"United Arab Emirates","id":"AE"},{"text":"United Kingdom","id":"GB"},{"text":"USA","id":"US"}]'))&&e.__esModule?e.default:e).forEach(e=>{let n=document.createElement("li");n.textContent=e.text,n.dataset.id=e.id,n.className="px-4 py-2 hover:bg-gray-200 cursor-pointer",n.addEventListener("click",e=>{let n=e.target.textContent,a=e.target.dataset.id;t.selectedCountry.textContent=n,t.countryList.classList.add("hidden"),t.dropdownArrow.classList.remove("rotate-180"),d.countryCode=a,d.page=1,l()}),t.countryList.appendChild(n)}),t.dropdown.addEventListener("click",()=>{t.countryList.classList.toggle("hidden"),t.dropdownArrow.classList.toggle("rotate-180")}),document.addEventListener("click",e=>{t.dropdown.contains(e.target)||(t.countryList.classList.add("hidden"),t.dropdownArrow.classList.remove("rotate-180"))});
//# sourceMappingURL=Event-Booster.27f0efd3.js.map
