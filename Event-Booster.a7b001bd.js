var t;const e={posters:document.getElementById("posters"),pagination:document.getElementById("pagination"),searchInput:document.getElementById("search-input"),dropdown:document.getElementById("countryDropdown"),countryList:document.getElementById("countryList"),selectedCountry:document.getElementById("selectedCountry"),dropdownArrow:document.getElementById("dropdownArrow")},a=new class{constructor(){this._apiKey="RO7qWdCAE673OL1GG2So7c2DTSgA49pc",this._baseUrl="https://app.ticketmaster.com/discovery/v2/events.json",this._countryCode="",this._search="",this._size=20,this._page=1,this._totalPages=1}get apiKey(){return this._apiKey}get baseUrl(){return this._baseUrl}get countryCode(){return this._countryCode}get search(){return this._search}get size(){return this._size}get page(){return this._page}get totalPages(){return this._totalPages}set countryCode(t){this._countryCode=t}set search(t){this._search=t}set size(t){this._size=t}set page(t){this._page=t}async fetchEvent(t){try{let a=await fetch(t);if(!a.ok)throw Error(`HTTP error ${a.status}`);let i=await a.json();if(!i?._embedded){e.posters.innerHTML="<p class='text-center text-2xl mb-12'>Нема подій.</p>",n();return}return this._totalPages=i.page.totalPages||1,i}catch(t){console.error("fetchEvent error:",t)}}getData(){return this.fetchEvent(`${this._baseUrl}?size=${this._size}&page=${this._page}&apikey=${this._apiKey}`)}getDataByCountry(t){return this.fetchEvent(`${this._baseUrl}?countryCode=${t}&size=${this._size}&page=${this._page}&apikey=${this._apiKey}`)}getDataByEventName(t){return this.fetchEvent(`${this._baseUrl}?keyword=${t}&size=${this._size}&page=${this._page}&apikey=${this._apiKey}`)}getDataByAuthor(t){return this.fetchEvent(`${this._baseUrl}?attractionName=${t}&size=${this._size}&page=${this._page}&apikey=${this._apiKey}`)}renderData(t){if(!t)return;let a=t._embedded.events.map(t=>`
      <div class="relative h-auto w-full md:w-[196px] text-center justify-items-center cursor-pointer hover:scale-103 transition-transform duration-100 ease-in-out">
        <div class="relative inline-block">
          <img class="mt-[13px] mb-[5px] rounded-tl-[50px] rounded-br-[50px] object-cover md:h-[227px]" src="${t.images[5].url}" alt="">
          <div class="absolute z-10 border border-[#DC56C54D] w-[153px] h-[143px] rounded-tl-[50px] rounded-br-[50px] top-0 -right-[12px]"></div>
        </div>
        <h2 class="text-pink-500 font-bold text-[14px] md:text-base">${t.name}</h2>
        <p class="text-white font-normal text-[14px] md:text-base">${t.dates.start.localDate}</p>
        <div class="flex items-center gap-[3px]">
          <img class="w-[7px] h-[10px]" src="public/icon-marker.svg" alt="">
          <p class="text-white font-semibold text-[12px] md:text-[14px]">${t._embedded.venues[0].name}</p>
        </div>
      </div>
    `).join("");e.posters.innerHTML=a}};function i(t,e=!1){let r=document.createElement("div");return r.className="px-3 py-1 cursor-pointer",e&&r.classList.add("active-page"),r.innerHTML=`<p class="text-[14px] font-normal">${t}</p>`,r.addEventListener("click",()=>{a.page!==t&&(a.page=t,s())}),r}function r(){let t=document.createElement("div");return t.className="px-3 py-1",t.innerHTML='<p class="text-[14px] font-normal">...</p>',t}function n(){let t=Math.max(1,a.totalPages),n=Math.min(Math.max(1,a.page),t),s=e.pagination;s.innerHTML="";let d=document.createDocumentFragment();if(t<=7){for(let e=1;e<=t;e++)d.appendChild(i(e,e===n));return s.appendChild(d)}let o=Math.max(2,n-Math.floor(2.5)),c=Math.min(t-1,o+5-1);c-o+1<5&&(o=Math.max(2,c-5+1)),d.appendChild(i(1,1===n)),o>2&&d.appendChild(r());for(let t=o;t<=c;t++)d.appendChild(i(t,t===n));c<t-1&&d.appendChild(r()),d.appendChild(i(t,n===t)),s.appendChild(d)}async function s(){let t=window.innerWidth;a.size=t>768&&t<1280?21:20;try{let t,i=e.searchInput.value.trim();t=a.countryCode?await a.getDataByCountry(a.countryCode):i?await a.getDataByEventName(i):await a.getData(),a.renderData(t),n()}catch(t){console.error("loadData error:",t)}}s(),e.searchInput.addEventListener("input",function(t,e=200){let a;return(...i)=>{clearTimeout(a),a=setTimeout(()=>t.apply(this,i),e)}}(()=>{a.page=1,s()}),1e3);((t=JSON.parse('[{"text":"","id":""},{"text":"Andorra","id":"AD"},{"text":"Australia","id":"AU"},{"text":"Austria","id":"AT"},{"text":"Belarus","id":"BY"},{"text":"Belgium","id":"BE"},{"text":"Brazil","id":"BR"},{"text":"Canada","id":"CA"},{"text":"Czech Republic","id":"CZ"},{"text":"Denmark","id":"DK"},{"text":"Estonia","id":"EE"},{"text":"Finland","id":"FI"},{"text":"France","id":"FR"},{"text":"Germany","id":"DE"},{"text":"Ireland","id":"IE"},{"text":"Israel","id":"IL"},{"text":"Italy","id":"IT"},{"text":"Latvia","id":"LV"},{"text":"Liechtenstein","id":"LI"},{"text":"Luxembourg","id":"LU"},{"text":"Macedonia","id":"MK"},{"text":"Mexico","id":"MX"},{"text":"Netherlands","id":"NL"},{"text":"New Zealand","id":"NZ"},{"text":"Norway","id":"NO"},{"text":"Poland","id":"PL"},{"text":"Portugal","id":"PT"},{"text":"Spain","id":"ES"},{"text":"Sweden","id":"SE"},{"text":"Switzerland","id":"CH"},{"text":"Ukraine","id":"UA"},{"text":"United Arab Emirates","id":"AE"},{"text":"United Kingdom","id":"GB"},{"text":"USA","id":"US"}]'))&&t.__esModule?t.default:t).forEach(t=>{let i=document.createElement("li");i.textContent=t.text,i.dataset.id=t.id,i.className="px-4 py-2 hover:bg-gray-200 cursor-pointer",i.addEventListener("click",t=>{let i=t.target.textContent,r=t.target.dataset.id;e.selectedCountry.textContent=i,e.countryList.classList.add("hidden"),e.dropdownArrow.classList.remove("rotate-180"),a.countryCode=r,a.page=1,s()}),e.countryList.appendChild(i)}),e.dropdown.addEventListener("click",()=>{e.countryList.classList.toggle("hidden"),e.dropdownArrow.classList.toggle("rotate-180")}),document.addEventListener("click",t=>{e.dropdown.contains(t.target)||(e.countryList.classList.add("hidden"),e.dropdownArrow.classList.remove("rotate-180"))});
//# sourceMappingURL=Event-Booster.a7b001bd.js.map
